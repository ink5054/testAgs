"use strict";(self.webpackChunkwebpack=self.webpackChunkwebpack||[]).push([[524],{968:()=>{},263:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.Device=void 0,t.Device=class{static isMobile(){return navigator.userAgent.includes("Mobile")||window.innerWidth<500}}},52:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0,t.View=class{static showPreloader(){$(".loader").removeClass("loader--visibility")}static hidePreloader(){$(".loader").addClass("loader--visibility")}}},349:function(e,t,i){var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const r=i(227);$(document).ready((()=>n(void 0,void 0,void 0,(function*(){const e=new r.PhoneNumbers;yield e.renderNumbers()}))))},227:function(e,t,i){var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))((function(r,s){function o(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PhoneNumbers=void 0;const r=i(263),s=i(52),o=i(23);i(729),t.PhoneNumbers=class{constructor(){this.$numbersList=$(".numbers__content-list"),this.$numbersDownload=$(".numbers__download-btn > button"),this.$numbersForm=$(".numbers__filters-form"),this.$numbersCount=$(".numbers__count span"),this.$filtersCount=$(".numbers__filters-btn .circle"),this.$overlay=$(".numbers__overlay"),this.numberCounter=0,this.page=1,this.filter={},$(document).on("click",".numbers__download-btn > button",(()=>n(this,void 0,void 0,(function*(){this.page+=this.page,yield this.renderNumbers()})))),$(document).on("click","#numbers-search",(()=>n(this,void 0,void 0,(function*(){this.numberCounter=0,this.$numbersList.empty(),yield this.renderNumbers()})))),$(document).on("change","#numbers-free-search",(e=>this.setFilter("free_search",$(e.currentTarget),"string"))),$(document).on("click","#numbers-categories button",(e=>this.setFilter("categories",$(e.currentTarget),"list"))),$(document).on("click","#numbers-operators button",(e=>this.setFilter("operators",$(e.currentTarget),"list"))),$(document).on("change","#numbers-regions",(e=>this.setFilter("region",$(e.currentTarget),"int"))),$(document).on("change","#numbers-min_price",(e=>this.setFilter("min_price",$(e.currentTarget),"int"))),$(document).on("change","#numbers-max_price",(e=>this.setFilter("max_price",$(e.currentTarget),"int"))),$(document).on("click","#numbers-clear",(()=>{this.$numbersForm.find("input").val(""),this.$numbersForm.find("select").val("0"),this.$numbersForm.find("button").removeClass("numbers__active--violet"),this.filter={},this.countFilters()})),$(document).on("touchend click","#overlay-show",(()=>{this.$overlay.fadeIn(1e3)})),$(document).on("touchend click","#overlay-hide",(()=>{this.$overlay.fadeOut(1e3)})),new o.Splide(".splide",{perPage:2,rewind:!0,autoWidth:!0,isNavigation:!1,arrows:!1,pagination:!1}).mount()}setFilter(e,t,i=null){let n;if("list"===i){t.toggleClass("numbers__active--violet");let i=t.find("span").data("id");return this.filter[e]||(this.filter[e]=[]),t.hasClass("numbers__active--violet")?this.filter[e].push(i):this.filter[e]=this.filter[e].filter((e=>e!==i)),this.filter[e].length||delete this.filter[e],void this.countFilters()}"int"===i?(n=String(t.val()).replace(/\D/g,""),n="0"===n?"":Number(n)):n=String(t.val()),this.filter[e]=n,n||delete this.filter[e],this.countFilters()}btnDownloadState(e){e<10?this.$numbersDownload.addClass("hidden"):this.$numbersDownload.removeClass("hidden")}countFilters(){this.$filtersCount.text(Object.keys(this.filter).length)}getNumbers(){return $.ajax({method:"POST",url:"/numbers/page/"+this.page,dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(this.filter),async:!1})}renderNumbers(){return n(this,void 0,void 0,(function*(){this.$numbersDownload.addClass("hidden"),s.View.showPreloader();try{const e=yield this.getNumbers();console.log(e);const t=e.list.length;this.btnDownloadState(t),this.numberCounter+=t,this.$numbersCount.text(this.numberCounter),$.each(e.list,((e,{number:t,operator_id:i,region_id:n,tariff_cost:r})=>{let s=window.regions.find((e=>e.id===n));this.$numbersList.append(`\n                             <div class="number-item">\n                                <div class="number-item__data flex-row">\n                                     <div class="operator-icon number-item__icon" data-id="${i}"></div>\n                                     <div>\n                                         <div class="number-item__block flex-row">\n                                             <div class="number-item__number">${t}</div>\n                                             <div class="number-item__expand" data-icon="chevron"></div>\n                                             <div class="label number-item__city">${s.name}</div>\n                                         </div>\n                                         <div class="number-item__tariff">Тарифы от ${r}</div>\n                                     </div>\n                                 </div>\n                             </div>\n                            `)})),s.View.hidePreloader(),this.$numbersDownload.removeClass("hidden"),r.Device.isMobile()&&this.$overlay.fadeOut()}catch(e){alert(JSON.stringify(e))}}))}}}},e=>{var t=t=>e(e.s=t);e.O(0,[83],(()=>(t(349),t(968)))),e.O()}]);